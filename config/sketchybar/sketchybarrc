PLUGIN_DIR="$HOME/.config/sketchybar/plugins"

# Theme
export COLOR_BAR=0xff1f2335 
export COLOR_WHITE=0xffffffff
export BACKGROUND_HEIGHT=38
export PADDING_ITEM=5

# Appearance
sketchybar --bar display=main \
                 height=38 \
                 padding_left=0 \
                 padding_right=0 \
                 blur_radius=$BACKGROUND_HEIGHT  \
                 color=$COLOR_BAR
                 

# Defaults
sketchybar --default label.font="JetBrainsMono Nerd Font:Regular:14.0" \
  icon.font="sketchybar-app-font:Regular:14.0"  \
  icon.color=$COLOR_WHITE \
  label.color=$COLOR_WHITE \
  padding_left=$PADDING_ITEM \
  padding_right=$PADDING_ITEM \
  


# aerospace
sketchybar --add event aerospace_workspace_change

for SID in $(aerospace list-workspaces --all); do
  echo $SID
  sketchybar --add item space.$SID left \
      --subscribe space.$SID aerospace_workspace_change \
      --set space.$SID \
      icon.font="JetBrainsMono Nerd Font:Regular:14.0" \
      label.font="sketchybar-app-font:Regular:14.0"  \
      background.height=20 \
      background.color=0x44ffcccc \
      icon="$SID" \
      label.padding_left=8 \
      label.padding_right=8 \
      click_script="aerospace workspace $SID" \
      script="$PLUGIN_DIR/aerospace.sh $SID"
done


# Right side
## Clock
sketchybar --add item clock right \
  --set clock update_freq=10 script="$PLUGIN_DIR/clock.sh" updates=on \
      label.color=0xff000000

sketchybar --add bracket bclock clock \
  --set bclock background.color=0xffb4f9f8 \
               background.drawing=on \
               background.height=$BACKGROUND_HEIGHT

## Wifi 
sketchybar --add item wifi right                               \
 --set wifi update_freq=60 updates=on script="$PLUGIN_DIR/wifi.sh" \
       label.color=0xff000000 \
 --subscribe wifi wifi_change

sketchybar --add bracket bwifi wifi \
  --set bwifi background.color=0xff7dcfff \
               background.drawing=on \
               background.height=$BACKGROUND_HEIGHT

## Media
sketchybar --add item media right \
  --set media script="$PLUGIN_DIR/music.sh" \
        label.color=0xff000000 \
  --subscribe media media_change

sketchybar --add bracket bmedia media \
  --set bmedia background.color=0xff7aa2f7 \
               background.drawing=on \
               background.height=$BACKGROUND_HEIGHT


##### Adding Left Items #####
# sketchybar --add item space_separator left                         \
#            --set space_separator icon=ÔÅî                            \
#                                  padding_left=10                   \
#                                  padding_right=10                  \
#                                  label.drawing=off                 \
#                                                                    \
#            --add item front_app left                               \
#            --set front_app       script="$PLUGIN_DIR/front_app.sh" \
#                                  icon.drawing=off                  \
#            --subscribe front_app front_app_switched


# Some items refresh on a fixed cycle, e.g. the clock runs its script once
# every 10s. Other items respond to events they subscribe to, e.g. the
# volume.sh script is only executed once an actual change in system audio
# volume is registered. More info about the event system can be found here:
# https://felixkratz.github.io/SketchyBar/config/events


#  sketchybar --add item volume right                             \
#  --set volume  script="$PLUGIN_DIR/volume.sh"        \
#  --subscribe volume volume_change                    \
#                                                      \
#  --add item battery right                            \
#  --set battery script="$PLUGIN_DIR/battery.sh"       \
#                update_freq=120                       \
#  --subscribe battery system_woke power_source_change



#### Finalizing Setup #####
# The below command is only needed at the end of the initial configuration to
# force all scripts to run the first time, it should never be run in an item script.

sketchybar --update
